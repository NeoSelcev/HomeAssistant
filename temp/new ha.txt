1. Debian 12.12.0 from belana etcher to flash usb

2. Install without GIU in expert mode (force GRUB)

3. After install login as root and set network up:
Открой файл: nano /etc/network/interfaces
Добавь в конец:
auto enp1s0
iface enp1s0 inet dhcp
Сохрани и выйди (Ctrl+O, Ctrl+X).
reboot

4. Если после установки с netinst-ISO осталась ссылка на CD-ROM, и из-за этого apt не может обновляться.
Откроем sources.list: nano /etc/apt/sources.list
Закомментируй строчку вида: # deb cdrom:[Debian GNU/Linux 12.12.0 _Bookworm_ ...] bookworm main

5. Добавь готовый дефолтный репозиторий
Запусти: apt edit-sources
Добавь: deb http://deb.debian.org/debian bookworm main
Сохрани файл и выйди: Ctrl+O, Enter, Ctrl+X
Обнови пакеты: apt update

6. Установи openssh-server
apt install openssh-server -y
systemctl enable ssh
systemctl start ssh

7. Добавь своего пользователя в sudo
Под root (на Wyse локально, не через SSH) сделай: apt install sudo -y
Замени user на твоё имя пользователя: usermod -aG sudo user

8. Ядро Linux без дополнительных параметров часто не умеет нормально выключать/перезагружать устройство
Открой файл настроек GRUB: sudo nano /etc/default/grub
Найди строку: GRUB_CMDLINE_LINUX_DEFAULT="quiet"
Замени на: GRUB_CMDLINE_LINUX_DEFAULT="quiet reboot=efi intel_idle.max_cstate=1"
sudo update-grub
reboot

Если не сработает, заменить и тестировать один за другим:
GRUB_CMDLINE_LINUX_DEFAULT="quiet reboot=acpi intel_idle.max_cstate=1"
GRUB_CMDLINE_LINUX_DEFAULT="quiet reboot=kbd intel_idle.max_cstate=1"
GRUB_CMDLINE_LINUX_DEFAULT="quiet reboot=hard intel_idle.max_cstate=1"
Иногда помогает вообще убрать intel_idle и оставить только:
GRUB_CMDLINE_LINUX_DEFAULT="quiet reboot=bios"
Дополнительно если все параметры не помогут, есть обходной путь вместо reboot использовать:
sudo systemctl kexec

9. Создай папку для ключей
mkdir -p ~/.ssh
chmod 700 ~/.ssh
Открой файл authorized_keys: nano ~/.ssh/authorized_keys
Вставь туда(одной строкой): ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIHNKOdVcE9EhXsjGimG00N86zo+ocaIzCx+0/KFTMiZU neoselcev@LenovoP14sgen2-Slava
Сохрани → Ctrl+O, Enter, Ctrl+X.
Поставь права: chmod 600 ~/.ssh/authorized_keys

10. На компе найди папку SSH-конфига
Обычно она здесь: C:\Users\<твой_пользователь>\.ssh\
Создай/открой файл config и вставь:
Host ha
    HostName 192.168.1.22
    Port 22
    User user
    IdentityFile C:\Users\neose\.ssh\id_ed25519
Host ha-vpn
    HostName 100.80.189.88
    Port 22
    User user
    IdentityFile C:\Users\neose\.ssh\id_ed25519

11. Установка Tailscale
sudo apt update
sudo apt install curl -y
curl -fsSL https://tailscale.com/install.sh | sh
sudo systemctl enable tailscaled
sudo systemctl start tailscaled
sudo tailscale up
Появится ссылка. Открой её и авторизуйся в Tailscale через GitHub.

12. Обновления
sudo nano /etc/apt/sources.list
deb http://deb.debian.org/debian bookworm main contrib non-free-firmware
deb http://deb.debian.org/debian-security bookworm-security main contrib non-free-firmware
deb http://deb.debian.org/debian bookworm-updates main contrib non-free-firmware
Сохрани → Ctrl+O, Enter, Ctrl+X.
sudo apt update
sudo apt upgrade -y
sudo apt full-upgrade -y
sudo apt autoremove -y

13 SWAP
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
swapon --show
free -h
Автоматическое включение при загрузке:
sudo nano /etc/fstab
В конец добавь строку:
/swapfile none swap sw 0 0
Сохрани (Ctrl+O, Enter, Ctrl+X).

14 HTOP
sudo apt update
sudo apt install htop -y
htop


HomeAssistant
192.168.1.22	
A4:bb:6d:20:67:77	

id_ed25519
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
QyNTUxOQAAACBzSjnVXBPRIV7IxophtNDfOs6PqHGiMwsftPyhUzImVAAAAKjNropLza6K
SwAAAAtzc2gtZWQyNTUxOQAAACBzSjnVXBPRIV7IxophtNDfOs6PqHGiMwsftPyhUzImVA
AAAEBwxp6MW7O9+NzY2hv/rg6blSU5BRwUkJPIXLrmr4Jwn3NKOdVcE9EhXsjGimG00N86
zo+ocaIzCx+0/KFTMiZUAAAAHm5lb3NlbGNldkBMZW5vdm9QMTRzZ2VuMi1TbGF2YQECAw
QFBgc=
-----END OPENSSH PRIVATE KEY-----

id_ed25519.pub
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIHNKOdVcE9EhXsjGimG00N86zo+ocaIzCx+0/KFTMiZU neoselcev@LenovoP14sgen2-Slava